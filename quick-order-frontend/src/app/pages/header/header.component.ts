import {Component, OnInit} from '@angular/core';import {TranslateService} from '@ngx-translate/core';import {ActivatedRoute, Router} from '@angular/router';import {HttpClient} from '@angular/common/http';import {Attribute} from '../../models/Attribute';import {LoginService} from '../../services/login.service';import {User} from '../../models/User';import {TokenStorageService} from '../../auth/token-storage.service';@Component({  selector: 'app-header',  templateUrl: './header.component.html',  styleUrls: ['./header.component.scss']})export class HeaderComponent implements OnInit {  model: any = {};  private language = '';  constructor(private translateService: TranslateService,              private route: ActivatedRoute,              private router: Router,              private http: HttpClient,              private loginService: LoginService,              private tokenStorageService: TokenStorageService) {    if (localStorage.getItem('defaultLanguage') == null) {      localStorage.setItem('defaultLanguage', 'EN');    }    this.language = localStorage.getItem('defaultLanguage');    translateService.setDefaultLang(this.language);    this.switchLanguage(this.language);  }  public switchLanguage(language: string) {    this.language = language;    this.translateService.use(this.language);  }  ngOnInit() {  }  logout(): void {    this.tokenStorageService.signOut();  }  public changeLanguage(language: string): void {    this.language = language;    this.switchLanguage(this.language);    localStorage.setItem('defaultLanguage', this.language);    // FIXME if(logged) and use userID to update language    if (this.isAuthenticated()) {//      this.updateLanguageOnUser(sessionStorage.getItem('token'), this.language);    }  }  updateLanguageOnUser(userId: string, language: string) {    const url = 'http://localhost:8080/api/users/attributes';    const attribute = new Attribute(language);    let user;    user = new User(sessionStorage.getItem('token').toString(), '');    user.userAttributeDto = attribute;    this.http.post(url, user).subscribe();  }  isAuthenticated() {    if (this.tokenStorageService.getAuthorities().length === 0) {      return false;    }    return true;  }  isAuthenticatedUser() {    if (this.tokenStorageService.getAuthorities().length === 0) {      return false;    }    for (const role of this.tokenStorageService.getAuthorities()) {      console.log(this.tokenStorageService.getAuthorities().toString());      if (role === 'ROLE_USER') {        return true;      } else {        return false;      }    }  }  isAuthenticatedWaiter() {    if (this.tokenStorageService.getAuthorities().length === 0) {      return false;    }    for (const role  of this.tokenStorageService.getAuthorities()) {      console.log(this.tokenStorageService.getAuthorities().toString());      if (role === 'ROLE_WAITER') {        return true;      } else {        return false;      }    }  }}